<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Backpack\CRUD\CrudTrait;

class Bairro extends Model
{
    use CrudTrait;
    	/*
    	|--------------------------------------------------------------------------
    	| GLOBAL VARIABLES
    	|--------------------------------------------------------------------------
    	*/

        protected $table = 'bairros';
        protected $fillable = [
        	'cidade_id',
        	'nome'
        ];

        /*
        |--------------------------------------------------------------------------
        | FUNCTIONS
        |--------------------------------------------------------------------------
        */

        public function getAutocomplete($texto)
        {
            return $this->where('bairros.nome', 'like', "%{$texto}%")
                ->where('status', 'L')
                ->get('nome')
                ->toArray();
        }

        /*
        |--------------------------------------------------------------------------
        | RELATIONS
        |--------------------------------------------------------------------------
        */

        public function cidade()
        {
        	return $this->belongsTo('App\Models\Cidade');
        }

        /*
        |--------------------------------------------------------------------------
        | SCOPES
        |--------------------------------------------------------------------------
        */

        /*
        |--------------------------------------------------------------------------
        | ACCESORS
        |--------------------------------------------------------------------------
        */

        /*
        |--------------------------------------------------------------------------
        | MUTATORS
        |--------------------------------------------------------------------------
        */
}
